(("undefined"!==typeof self?self:this)["webpackChunkrancher_ai_ui_0_1_1"]=("undefined"!==typeof self?self:this)["webpackChunkrancher_ai_ui_0_1_1"]||[]).push([[913],{94:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),r=a.n(s),i=r()(o());i.push([e.id,".thinking-message .dots[data-v-611b6c7d]{display:inline-flex;width:12px}",""]),t["default"]=i},116:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),r=a.n(s),i=r()(o());i.push([e.id,".chat-input-row[data-v-10bd07e1]{display:flex;align-items:center;gap:8px;padding:12px 16px;border-bottom-left-radius:8px;border-bottom-right-radius:8px;border-top:1px solid var(--border);min-height:70px}.chat-input[data-v-10bd07e1]{flex:1;border:1px solid var(--border);border-radius:8px;padding:8px 16px;font-size:1rem;outline:none;color:var(--input-text);transition:border .2s;width:auto;outline-offset:0;resize:none;overflow:auto;min-height:36px;max-height:90px}.chat-input[data-v-10bd07e1]:focus{border:solid 1.5px var(--secondary-border,var(--primary))}.chat-input-console .btn[data-v-10bd07e1]{height:36px}",""]),t["default"]=i},162:function(e,t,a){var n=a(8162);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("563d5b91",n,!0,{sourceMap:!1,shadowMode:!1})},366:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),r=a.n(s),i=r()(o());i.push([e.id,".chat-messages[data-v-270e9337]{flex:1;overflow-y:auto;padding:16px 10px 0 8px;display:flex;flex-direction:column;gap:16px}",""]),t["default"]=i},1097:function(e,t,a){var n=a(2521);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("9a545190",n,!0,{sourceMap:!1,shadowMode:!1})},1144:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),r=a.n(s),i=r()(o());i.push([e.id,".chat-container[data-v-4181ee82]{display:flex;flex-direction:row;height:calc(100vh - 55px);position:relative;z-index:20}.chat-panel[data-v-4181ee82]{width:100%;background:var(--box-bg);display:flex;flex-direction:column;margin:0 auto;font-family:Inter,Arial,sans-serif}.resize-bar[data-v-4181ee82]{position:absolute;top:0;left:0;width:4px;height:100%;cursor:ew-resize;background:transparent;transition:background .2s;z-index:20;opacity:0}.resize-bar[data-v-4181ee82]:hover{background:var(--primary);opacity:1}",""]),t["default"]=i},1524:function(e,t,a){var n=a(2196);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("32dab6df",n,!0,{sourceMap:!1,shadowMode:!1})},1678:function(e,t,a){var n=a(366);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("0fca97cc",n,!0,{sourceMap:!1,shadowMode:!1})},1996:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),r=a.n(s),i=r()(o());i.push([e.id,".chat-message[data-v-1ef7fbe0]{display:flex;gap:8px}.chat-msg-content[data-v-1ef7fbe0]{margin-right:40px}.chat-message-user[data-v-1ef7fbe0]{flex-direction:row-reverse}.chat-message-user .chat-msg-content[data-v-1ef7fbe0]{display:flex;flex-direction:column;align-items:flex-end;margin:0}.chat-message-user .chat-msg-text[data-v-1ef7fbe0]{color:var(--on-tertiary)}.chat-msg-bubble[data-v-1ef7fbe0]{position:relative;max-width:455px;background:var(--body-bg);color:var(--body-text);border:1px solid var(--border);border-radius:12px;box-shadow:0 2px 8px 0 rgba(0,0,0,.04);padding:12px;font-size:.95rem;display:flex;flex-direction:column;gap:6px}.chat-msg-bubble:hover .chat-msg-bubble-actions[data-v-1ef7fbe0]{opacity:1;pointer-events:auto}.chat-msg-bubble-user[data-v-1ef7fbe0]{background:var(--tertiary-hover);align-items:flex-end}.chat-msg-bubble-error[data-v-1ef7fbe0]{background:var(--error-banner-bg);border-color:var(--error);color:var(--error-banner-text,var(--error))}.chat-msg-bubble-actions[data-v-1ef7fbe0]{position:absolute;top:-15px;right:-15px;display:flex;gap:5px;z-index:2;opacity:0;pointer-events:none;transition:opacity .2s}.bubble-action-btn[data-v-1ef7fbe0]{background:var(--body-bg);border:1.5px solid var(--border);border-radius:8px;padding:2px 4px;box-shadow:0 1px 4px 0 rgba(0,0,0,.04);cursor:pointer;transition:border .15s,box-shadow .15s;display:flex;align-items:center;justify-content:center;min-width:24px;min-height:24px;width:24px;height:24px}.bubble-action-btn .icon[data-v-1ef7fbe0]{font-size:14px;width:14px;height:14px}.bubble-action-btn.header-btn[data-v-1ef7fbe0]{padding:2px;min-width:20px;min-height:20px;width:25px;height:25px}.bubble-action-btn.header-btn .icon[data-v-1ef7fbe0]{font-size:12px;width:12px;height:12px}.bubble-action-btn[data-v-1ef7fbe0]:hover{border:solid 1px var(--secondary-border,var(--primary));box-shadow:0 2px 8px 0 rgba(61,152,211,.1)}.chat-msg-text[data-v-1ef7fbe0]{word-break:break-word;white-space:pre-line;list-style-position:inside}.chat-msg-section[data-v-1ef7fbe0],.chat-msg-section-footer[data-v-1ef7fbe0]{margin-top:8px}.chat-msg-timestamp[data-v-1ef7fbe0]{font-size:.75rem;color:#94a3b8;margin-top:8px;margin-bottom:8px;align-self:flex-end}.icon-action-source[data-v-1ef7fbe0]{width:16px;height:16px;min-width:16px;min-height:16px;display:inline-block;vertical-align:middle}.inline-button[data-v-1ef7fbe0]{margin-left:auto;height:15px;min-height:15px}.chat-msg-user-expanded[data-v-1ef7fbe0]{display:block;margin-top:16px}.chat-msg-user-expanded[data-v-1ef7fbe0]  ul{padding:0 0 0 8px;margin:0;margin-top:-10px}",""]),t["default"]=i},2098:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),r=a.n(s),i=r()(o());i.push([e.id,".chat-msg-action-title[data-v-26f722e1]{display:flex;align-items:center;gap:4px;color:var(--on-secondary)}.chat-msg-action-title span[data-v-26f722e1]{font:9px sans-serif;font-weight:500}.chat-msg-action-tags[data-v-26f722e1]{display:flex;gap:4px;flex-wrap:wrap;margin-top:4px}.chat-msg-actions[data-v-26f722e1]{display:flex;gap:6px;flex-wrap:wrap;margin-top:2px}",""]),t["default"]=i},2196:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),r=a.n(s),i=r()(o());i.push([e.id,".chat-header[data-v-243d4226]{background:var(--active-nav);color:var(--on-active);padding:12px 16px;display:flex;align-items:center;justify-content:space-between}.chat-title[data-v-243d4226]{display:flex;flex-direction:row;align-items:baseline;min-width:0}.chat-title .chat-name[data-v-243d4226]{font-weight:600;font-size:1em;color:var(--on-active);margin:0;margin-top:4px;width:60px}.chat-title .chat-name .icon[data-v-243d4226]{margin-right:3px}.chat-title .chat-name .label[data-v-243d4226]{font-size:1.3em}.chat-title .chat-model[data-v-243d4226]{font-size:.8rem;color:var(--on-active);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:0;flex:1 1 auto}.chat-close-btn[data-v-243d4226]{background:transparent;border:none;cursor:pointer;border-radius:8px;transition:background .2s}.chat-close-btn .btn-close[data-v-243d4226]{margin:0 8px}.chat-close-btn[data-v-243d4226]:hover{background:var(--active-hover)}.btn-close[data-v-243d4226]{margin:0!important}.icon-close[data-v-243d4226]{width:32px}",""]),t["default"]=i},2521:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),r=a.n(s),i=r()(o());i.push([e.id,".user-msg-avatar[data-v-3549b675]{width:32px;height:32px;border-radius:50%;background:var(--body-bg);border:1px solid var(--border);color:var(--primary);display:flex;align-items:center;justify-content:center;flex-shrink:0}.round-avatar[data-v-3549b675]{border:0;border-radius:50%}",""]),t["default"]=i},3026:function(e,t,a){var n=a(3250);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("2102bc6f",n,!0,{sourceMap:!1,shadowMode:!1})},3084:function(e,t,a){var n=a(1996);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("51061466",n,!0,{sourceMap:!1,shadowMode:!1})},3188:function(e,t,a){var n=a(4948);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("5a324ef2",n,!0,{sourceMap:!1,shadowMode:!1})},3207:function(e,t,a){var n=a(7063);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("e9397074",n,!0,{sourceMap:!1,shadowMode:!1})},3250:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),r=a.n(s),i=r()(o());i.push([e.id,".context-select[data-v-15abc270],.tags[data-v-15abc270]{display:flex;flex-wrap:wrap;max-width:100%;align-items:center;gap:5px;color:var(--active-nav)}.context-select[data-v-15abc270]{gap:10px}.no-context[data-v-15abc270]{margin:7px 0 7px 0}.tag[data-v-15abc270]{display:flex;flex-direction:row;gap:5px;height:25px;line-height:1;margin-right:5px;margin-left:0;padding:0 5px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;cursor:pointer}.tag .tag-content[data-v-15abc270]{display:flex;justify-content:center;gap:5px}.tag .vs__deselect[data-v-15abc270]{margin:0}.vs__selected[data-v-15abc270]{border:solid 1px var(--active-nav)}.icon-pin-outlined[data-v-15abc270],.vs__selected[data-v-15abc270]{color:var(--active-nav)}",""]),t["default"]=i},4226:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),r=a.n(s),i=r()(o());i.push([e.id,".disabled{opacity:.5;pointer-events:none}",""]),t["default"]=i},4370:function(e,t,a){var n=a(2098);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("67765a2a",n,!0,{sourceMap:!1,shadowMode:!1})},4520:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),r=a.n(s),i=r()(o());i.push([e.id,".link[data-v-5bbadf32]{cursor:pointer}",""]),t["default"]=i},4948:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),r=a.n(s),i=r()(o());i.push([e.id,".system-msg-avatar[data-v-7bae8fb7]{width:32px;height:32px;border-radius:50%;background:var(--body-bg);border:1px solid var(--border);color:#22c55e;display:flex;align-items:center;justify-content:center;flex-shrink:0}",""]),t["default"]=i},6134:function(e,t,a){var n=a(6550);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("6a47f8a5",n,!0,{sourceMap:!1,shadowMode:!1})},6370:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),r=a.n(s),i=r()(o());i.push([e.id,".chat-msg-source-label[data-v-41be52b1]{display:flex;align-items:center;gap:4px;color:#9fabc6}.chat-msg-source-label span[data-v-41be52b1]{font:9px sans-serif;font-weight:500}.chat-msg-source-tags[data-v-41be52b1]{display:flex;gap:4px;flex-wrap:wrap;margin-top:6px}.chat-msg-source-tag[data-v-41be52b1]{color:#9fabc6;border-radius:8px;padding:2px 8px;font-size:.75rem;border:1px solid #9fabc6}",""]),t["default"]=i},6466:function(e,t,a){var n=a(4226);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("a57e119a",n,!0,{sourceMap:!1,shadowMode:!1})},6550:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),r=a.n(s),i=r()(o());i.push([e.id,".chat-context[data-v-3b74eddd]{border-top:1px solid var(--border);padding:12px 16px;display:flex;align-items:center;gap:8px;font-size:.85rem}",""]),t["default"]=i},6746:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return xt}});var n=a(9274),o=a(3100),s=a(5359),r=a(741);function i(e){const t=(0,s.Pj)(),a=(0,n.computed)(()=>t.getters["rancher-ai-ui/connection/ws"]),o=(0,n.computed)(()=>t.getters["rancher-ai-ui/connection/error"]);async function i(a,n,o){const s=`wss://${window.location.host}/api/v1/namespaces/${a}/services/http:${n}:80/proxy/${o}`,{onopen:r,onmessage:i,onclose:l}=e;await t.dispatch("rancher-ai-ui/connection/open",{url:s,onopen:r,onmessage:i,onclose:l||(()=>{t.commit("rancher-ai-ui/connection/setError",{key:"ai.error.websocket.disconnected"})})})}function l(){r.A.isOpen(t)||a.value?.readyState===WebSocket.OPEN||t.commit("rancher-ai-ui/connection/close")}return{ws:a,error:o,connect:i,disconnect:l}}function l(){const e=(0,s.Pj)(),t=(0,n.computed)(()=>e.getters["rancher-ai-ui/context/all"]),a=(0,n.ref)([]);function o(e){a.value=e}return(0,n.onBeforeUnmount)(()=>{e.commit("rancher-ai-ui/context/reset")}),{context:t,selectContext:o,selectedContext:a}}var c=a(2766),d=a(9557),u=a(4364);const m="default",p=!1;function g(){const e=(0,s.Pj)(),t=e.getters["i18n/t"],a=(0,n.computed)(()=>Object.values(e.getters["rancher-ai-ui/chat/messages"](m))),o=(0,n.ref)({}),r=(0,n.computed)(()=>e.getters["rancher-ai-ui/chat/error"](m)),{selectContext:i,selectedContext:g}=l();function v(e,t){e&&(t.send((0,d.mi)(e,g.value)),f({role:c.Xh.User,messageContent:e}))}async function f(t){return await e.dispatch("rancher-ai-ui/chat/addMessage",{chatId:m,message:t})}function h(t){e.commit("rancher-ai-ui/chat/updateMessage",{chatId:m,message:t})}function b(e,t){const a=JSON.stringify({prompt:e?"yes":"no"});t.send(a)}function k(t){return e.getters["rancher-ai-ui/chat/message"]({chatId:m,messageId:t})}function x(){a.value.length>0||f({role:c.Xh.System,messageContent:t("ai.message.system.welcome")})}async function y(t){const a=t.data;try{switch(a){case c.vw.MessageStart:const e=await f({role:c.Xh.Assistant,thinkingContent:"",messageContent:"",showThinking:p,thinking:!1,completed:!1});o.value=k(e);break;case c.vw.ThinkingStart:o.value.thinking=!0;break;case c.vw.ThinkingEnd:o.value.thinking=!1;break;case c.vw.MessageEnd:o.value.messageContent=o.value.messageContent?.replace(/[\r\n]+$/,""),o.value.thinking=!1,o.value.completed=!0;break;default:if(!1===o.value.completed&&!0===o.value.thinking){if(!o.value.thinkingContent&&""===a.trim())break;o.value.thinkingContent+=a;break}if(!1===o.value.completed&&!1===o.value.thinking){if(!o.value.messageContent&&""===a.trim())break;if(a.startsWith(c.vw.McpResultStart)&&a.endsWith(c.vw.McpResultEnd)){o.value.linkActions=(0,d.GE)(a);break}if(a.startsWith(c.vw.ConfirmationStart)&&a.endsWith(c.vw.ConfirmationEnd)){o.value.confirmationAction=(0,d.Hx)(a),o.value.thinking=!1,o.value.completed=!0;break}if(o.value.messageContent+=a,o.value.messageContent?.includes(c.vw.SuggestionsStart)&&o.value.messageContent?.includes(c.vw.SuggestionsEnd)){const{suggestionActions:e,cleanMessageContent:t}=(0,d.hS)(o.value.messageContent);o.value.suggestionActions=e,o.value.messageContent=t;break}break}break}}catch(n){u.error("Error processing messages:",n),e.commit("rancher-ai-ui/chat/setError",{chatId:m,error:{key:"ai.error.message.processing"}})}}function w(){e.commit("rancher-ai-ui/chat/setError",{chatId:m,error:null})}return(0,n.onMounted)(()=>{e.commit("rancher-ai-ui/chat/init",m)}),{onopen:x,onmessage:y,messages:a,sendMessage:v,addMessage:f,updateMessage:h,confirmMessage:b,selectContext:i,resetChatError:w,error:r}}var v=a(2774),f=a(1160),h=a(7157);function b(){const e=(0,s.Pj)(),{onTabClose:t}=(0,v.A)(),{setDimensions:a}=(0,f.A)({position:r.A.panelPosition}),{mouseResizeXStart:n}=(0,h.A)({position:r.A.panelPosition,setDimensions:a});function o(e){n(e)}function i(){t(r.A.panelId),r.A.close(e)}function l(){r.A.restoreDefaultPositions(e)}return{resize:o,close:i,restore:l}}var k=a(2331),x=a(5505),y=a.n(x),w=a(7319),C=a(5664);function E(){const e=(0,s.Pj)(),t=e.getters["i18n/t"],a=(0,n.ref)(null),r=(0,n.ref)(null);function i(e){const a={},{OLLAMA_URL:n,GOOGLE_API_KEY:o,OPENAI_API_KEY:s,MODEL:r}=e;if(n?a.name=t("ai.agent.models.ollama"):o?a.name=t("ai.agent.models.gemini"):s&&(a.name=t("ai.agent.models.openai")),a.name){try{const e=y().parse((0,k.u)(r||""));a.model=e||"unknown"}catch(i){(0,w.R)("Error parsing agent model version",i)}return a}return null}async function l(){if(e.getters["management/schemaFor"](C.oU.DEPLOYMENT))try{const a=await e.dispatch("management/find",{type:C.oU.DEPLOYMENT,id:`${o.AGENT_NAMESPACE}/${o.AGENT_NAME}`});a&&"active"!==a.state&&(r.value={key:"ai.error.agent.notActive",action:{label:t("ai.agent.goToDeployment"),type:c.X2.Button,resource:{cluster:"local",type:C.oU.DEPLOYMENT,namespace:o.AGENT_NAMESPACE,name:o.AGENT_NAME}}})}catch(a){(0,w.R)("'rancher-ai-agent' deployment not found",a),r.value={key:"ai.error.agent.notFound",action:{label:t("ai.agent.goToInstall"),type:c.X2.Button,resource:{detailLocation:{name:"c-cluster-apps-charts"}}}}}else(0,w.R)("Deployment schema not found");return!r.value}async function d(){try{const t=await e.dispatch("management/find",{type:C.bB,id:`${o.AGENT_NAMESPACE}/${o.AGENT_CONFIG_SECRET_NAME}`});t?.data&&(a.value=i(t.data))}catch(n){(0,w.R)("Error fetching agent configuration secret:",n)}a.value||(r.value={key:"ai.error.agent.missingConfig",action:{label:t("ai.settings.goToSettings"),type:c.X2.Button,resource:{detailLocation:{name:`c-cluster-settings-${o.PRODUCT_NAME}`}}}})}return(0,n.onMounted)(async()=>{const e=await l();e&&d()}),{agent:a,error:r}}var _=a(5530);const B={class:"chat-header"},N={class:"chat-title"},A={class:"chat-name"},M={class:"label"},V={class:"chat-model"},T={class:"chat-close-btn"};var S=(0,n.defineComponent)({__name:"Header",props:{agent:{type:Object,default:null}},emits:["close"],setup(e,{emit:t}){const a=(0,s.Pj)(),o=a.getters["i18n/t"],r=e,i=t;return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",B,[(0,n.createElementVNode)("div",N,[(0,n.createElementVNode)("div",A,[t[3]||(t[3]=(0,n.createElementVNode)("i",{class:"icon icon-ai icon-lg"},null,-1)),(0,n.createElementVNode)("span",M,(0,n.toDisplayString)((0,n.unref)(o)("ai.title")),1)]),(0,n.createElementVNode)("span",V,(0,n.toDisplayString)(r.agent?(0,n.unref)(o)("ai.agent.label",{name:r.agent.name,model:r.agent.model},!0):(0,n.unref)(o)("ai.agent.unknown")),1)]),(0,n.createElementVNode)("div",T,[(0,n.createVNode)(_.A,{small:"",ghost:"",class:"btn-close",onClick:t[0]||(t[0]=e=>i("close")),onKeydown:[t[1]||(t[1]=(0,n.withKeys)((0,n.withModifiers)(e=>i("close"),["stop"]),["enter"])),t[2]||(t[2]=(0,n.withKeys)((0,n.withModifiers)(e=>i("close"),["stop"]),["space","enter"]))]},{default:(0,n.withCtx)(()=>t[4]||(t[4]=[(0,n.createElementVNode)("i",{class:"icon icon-close"},null,-1)])),_:1,__:[4]})])]))}}),D=(a(1524),a(7433));const I=(0,D.A)(S,[["__scopeId","data-v-243d4226"]]);var P=I;const z={class:"thinking-message"},j={class:"dots"};var L=(0,n.defineComponent)({__name:"Thinking",props:{label:{type:String,default:""}},setup(e){const t=(0,s.Pj)(),a=t.getters["i18n/t"],o=(0,n.ref)(Date.now());let r;const i=e,l=(0,n.computed)(()=>{const e=Math.floor(o.value/500%4);return".".repeat(e)});return(0,n.onMounted)(()=>{r=setInterval(()=>{o.value=Date.now()},500)}),(0,n.onBeforeUnmount)(()=>{r&&clearInterval(r)}),(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",z,[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(i.label||(0,n.unref)(a)("ai.message.assistant.thinking.inProgress")),1),(0,n.createElementVNode)("div",j,[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(l.value),1)])]))}});a(7134);const U=(0,D.A)(L,[["__scopeId","data-v-611b6c7d"]]);var X=U;const $={key:0},O={key:1},G={key:1},R={key:0,class:"text-muted"};var F=(0,n.defineComponent)({__name:"Link",props:{value:{type:Object,default:()=>({})}},setup(e){const t=(0,s.Pj)(),a=e,o=(0,n.ref)(null),r=(0,n.ref)("");function i(){t.$router.push(o.value.detailLocation)}return(0,n.onMounted)(async()=>{if(a.value.resource.detailLocation)o.value=a.value.resource;else{const{cluster:e,type:n,namespace:s,name:r}=a.value.resource;o.value=await t.dispatch("management/find",{cluster:e,type:n,id:s?`${s}/${r}`:r})}}),(e,t)=>{const s=(0,n.resolveDirective)("clean-tooltip");return(0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,null,[a.value.type===(0,n.unref)(c.X2).Button?((0,n.openBlock)(),(0,n.createElementBlock)("div",$,[(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createBlock)(_.A,{small:"",secondary:"",disabled:!o.value,onClick:i},{default:(0,n.withCtx)(()=>[(0,n.createTextVNode)((0,n.toDisplayString)(a.value.label),1)]),_:1},8,["disabled"])),[[s,r.value]])])):(0,n.createCommentVNode)("",!0),a.value.type===(0,n.unref)(c.X2).Link?((0,n.openBlock)(),(0,n.createElementBlock)("span",O,[o.value?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("a",{key:0,class:"link",onClick:i},[(0,n.createTextVNode)((0,n.toDisplayString)(a.value.label),1)])),[[s,r.value]]):((0,n.openBlock)(),(0,n.createElementBlock)("span",G,[(0,n.createTextVNode)((0,n.toDisplayString)(a.value.label)+" ",1),a.value?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("span",R,"â€”"))]))])):(0,n.createCommentVNode)("",!0)],64)}}});a(7432);const K=(0,D.A)(F,[["__scopeId","data-v-5bbadf32"]]);var H=K;const Y={class:"chat-actions-container"},W={class:"chat-msg-action-title"},q={class:"chat-msg-action-tags"};var J=(0,n.defineComponent)({__name:"index",props:{actions:{type:Array,default:()=>[]}},setup(e){const t=(0,s.Pj)(),a=t.getters["i18n/t"],o=e;return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",Y,[(0,n.createElementVNode)("div",W,[t[0]||(t[0]=(0,n.createElementVNode)("i",{class:"icon icon-quick-action"},null,-1)),(0,n.createElementVNode)("span",null,(0,n.toDisplayString)((0,n.unref)(a)("ai.message.relatedResources.label")),1)]),(0,n.createElementVNode)("div",q,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(o.actions,(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:t,class:"mt-2 chat-msg-actions"},[(0,n.createVNode)(H,{value:e},null,8,["value"])]))),128))])]))}});a(4370);const Q=(0,D.A)(J,[["__scopeId","data-v-26f722e1"]]);var Z=Q;const ee={class:"chat-source-container"},te={class:"chat-msg-source-label"},ae={key:0,class:"chat-msg-source-tags"};var ne=(0,n.defineComponent)({__name:"index",setup(e){const t=(0,s.Pj)(),a=t.getters["i18n/t"],o=(0,n.ref)(!0);return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",ee,[(0,n.createElementVNode)("div",te,[t[1]||(t[1]=(0,n.createElementVNode)("i",{class:"icon icon-sources"},null,-1)),(0,n.createElementVNode)("span",null,(0,n.toDisplayString)((0,n.unref)(a)("ai.message.source.label")),1),(0,n.createElementVNode)("i",{class:(0,n.normalizeClass)(["icon icon-sm",{"icon icon-chevron-up text-label":!o.value,"icon icon-chevron-down text-label":o.value}]),onClick:t[0]||(t[0]=e=>o.value=!o.value)},null,2)]),o.value?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",ae,t[2]||(t[2]=[(0,n.createElementVNode)("span",{class:"chat-msg-source-tag"},"Cluster Management Guide",-1),(0,n.createElementVNode)("span",{class:"chat-msg-source-tag"},"Best Practices",-1)])))]))}});a(9426);const oe=(0,D.A)(ne,[["__scopeId","data-v-41be52b1"]]);var se=oe;const re={class:"confirmation-action"},ie={class:"confirmation-message"},le={class:"confirmation-buttons"},ce={key:0,class:"delete-confirmation"},de={key:1,class:"standard-confirmation"};var ue=(0,n.defineComponent)({__name:"index",props:{value:{type:Object,default:()=>({})}},emits:["confirm"],setup(e,{emit:t}){const a=(0,s.Pj)(),o=a.getters["i18n/t"],r=e,i=t,l=(0,n.ref)(!1);function d(e){i("confirm",e),l.value=!0}return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",re,[(0,n.createElementVNode)("div",ie,[(0,n.createElementVNode)("p",null,(0,n.toDisplayString)((0,n.unref)(o)("ai.confirmation.message")),1)]),(0,n.createElementVNode)("div",le,[r.value.type===(0,n.unref)(c.YB).Delete?((0,n.openBlock)(),(0,n.createElementBlock)("div",ce)):((0,n.openBlock)(),(0,n.createElementBlock)("div",de,[(0,n.createVNode)(_.A,{small:"",secondary:"",disabled:l.value,onClick:t[0]||(t[0]=e=>d(!0))},{default:(0,n.withCtx)(()=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(o)("ai.confirmation.yes")),1)]),_:1},8,["disabled"])]))])]))}});a(162);const me=(0,D.A)(ue,[["__scopeId","data-v-45ba26ae"]]);var pe=me;const ge={class:"suggestions-container"},ve={class:"suggestions-header"};var fe=(0,n.defineComponent)({__name:"index",props:{suggestions:{type:Array,default:()=>[]}},emits:["select"],setup(e,{emit:t}){const a=(0,s.Pj)(),o=a.getters["i18n/t"],r=e,i=t;return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",ge,[(0,n.createElementVNode)("div",ve,(0,n.toDisplayString)((0,n.unref)(o)("ai.message.suggestions.label")),1),((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(r.suggestions,(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:t},[(0,n.createVNode)(_.A,{tertiary:"",small:"",onClick:()=>i("select",e)},{default:(0,n.withCtx)(()=>[(0,n.createTextVNode)((0,n.toDisplayString)(e),1)]),_:2},1032,["onClick"])]))),128))]))}});a(3207);const he=(0,D.A)(fe,[["__scopeId","data-v-50b2cb26"]]);var be=he;const ke={class:"user-msg-avatar"},xe=["src","alt"],ye={key:1,class:"icon icon-user"};var we=(0,n.defineComponent)({__name:"UserAvatar",setup(e){const t=(0,s.Pj)(),a=t.getters["i18n/t"],o=(0,n.computed)(()=>{const e=t.getters["rancher/byId"](C.k$.PRINCIPAL,t.getters["auth/principalId"])||{};return e?.avatarSrc});return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",ke,[o.value?((0,n.openBlock)(),(0,n.createElementBlock)("img",{key:0,src:o.value,class:"round-avatar",width:"20",height:"20",alt:(0,n.unref)(a)("nav.alt.userAvatar")},null,8,xe)):((0,n.openBlock)(),(0,n.createElementBlock)("i",ye))]))}});a(1097);const Ce=(0,D.A)(we,[["__scopeId","data-v-3549b675"]]);var Ee=Ce,_e=a.p+"img/liz-icon.fdbc7bd8.svg";const Be={class:"system-msg-avatar"},Ne=["src"];var Ae=(0,n.defineComponent)({__name:"SystemAvatar",setup(e){return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",Be,[(0,n.createElementVNode)("img",{class:"img-svg",src:(0,n.unref)(_e)},null,8,Ne)]))}});a(3188);const Me=(0,D.A)(Ae,[["__scopeId","data-v-7bae8fb7"]]);var Ve=Me;const Te={class:"chat-msg-content"},Se={key:0,class:"chat-msg-bubble-actions"},De={class:"chat-msg-text"},Ie={key:0},Pe={key:1},ze={key:0},je={key:1},Le={key:2},Ue={key:1,class:"chat-msg-section-footer"},Xe={key:2,class:"chat-msg-section-footer"},$e={key:0,class:"chat-msg-section"},Oe={key:1,class:"chat-msg-section"},Ge={key:2,class:"chat-msg-timestamp"};var Re=(0,n.defineComponent)({__name:"index",props:{message:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1}},emits:["update:message","confirm:message","send:message","enable:autoscroll"],setup(e,{emit:t}){const a=(0,s.Pj)(),o=a.getters["i18n/t"],r=e,i=t,l=(0,n.computed)(()=>r.message.role===c.Xh.Assistant&&!r.message.completed&&(r.message.thinking||!r.message.formattedMessageContent)),d=(0,n.ref)(!1),u=(0,n.ref)(null),m=(0,n.ref)(null);function p(){if(!r.message.messageContent&&!r.message.thinkingContent)return;let e="";c.Xh.Assistant&&r.message.showThinking&&(e=r.message.thinkingContent||""),e+=r.message.messageContent||"",navigator.clipboard.writeText(e),d.value=!0,u.value&&clearTimeout(u.value),u.value=setTimeout(()=>{d.value=!1},1e3)}function g(){r.message.showCompleteMessage=!r.message.showCompleteMessage,(0,n.nextTick)(()=>{i("update:message",r.message)})}function v(){r.message.showThinking=!r.message.showThinking,i("enable:autoscroll",!1),(0,n.nextTick)(()=>{i("update:message",r.message)}),m.value&&clearTimeout(m.value),m.value=setTimeout(()=>{i("enable:autoscroll",!0)},500)}return(0,n.onBeforeUnmount)(()=>{u.value&&clearTimeout(u.value),m.value&&clearTimeout(m.value)}),(e,t)=>{const a=(0,n.resolveDirective)("clean-tooltip"),s=(0,n.resolveDirective)("clean-html");return(0,n.openBlock)(),(0,n.createElementBlock)("div",{class:(0,n.normalizeClass)(["chat-message",{"chat-message-user":r.message.role===(0,n.unref)(c.Xh).User,disabled:r.disabled}])},[((0,n.openBlock)(),(0,n.createBlock)((0,n.resolveDynamicComponent)(r.message.role===(0,n.unref)(c.Xh).User?Ee:Ve),{class:"chat-msg-avatar"})),(0,n.createElementVNode)("div",Te,[(0,n.createElementVNode)("div",{class:(0,n.normalizeClass)(["chat-msg-bubble",{"chat-msg-bubble-user":r.message.role===(0,n.unref)(c.Xh).User,"chat-msg-bubble-assistant":r.message.role!==(0,n.unref)(c.Xh).User,"chat-msg-bubble-error":r.message.isError}])},[r.disabled?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",Se,[r.message.role===(0,n.unref)(c.Xh).Assistant&&r.message.thinkingContent?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("button",{key:0,class:"bubble-action-btn btn header-btn role-tertiary",type:"button",role:"button",onClick:v},t[2]||(t[2]=[(0,n.createElementVNode)("i",{class:"icon icon-thinking-process"},null,-1)]))),[[a,r.message.showThinking?(0,n.unref)(o)("ai.message.actions.tooltip.hideThinking"):(0,n.unref)(o)("ai.message.actions.tooltip.showThinking")]]):(0,n.createCommentVNode)("",!0),(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("button",{class:"bubble-action-btn btn header-btn role-tertiary",type:"button",role:"button",onClick:p},[(0,n.createElementVNode)("i",{class:(0,n.normalizeClass)({"icon icon-checkmark":d.value,"icon icon-copy":!d.value})},null,2)])),[[a,(0,n.unref)(o)("ai.message.actions.tooltip.copy")]])])),(0,n.createElementVNode)("div",De,[l.value?((0,n.openBlock)(),(0,n.createElementBlock)("div",Ie,[(0,n.createVNode)(X)])):(0,n.createCommentVNode)("",!0),r.message.showThinking?((0,n.openBlock)(),(0,n.createElementBlock)("span",Pe,[l.value?((0,n.openBlock)(),(0,n.createElementBlock)("br",ze)):(0,n.createCommentVNode)("",!0),r.message.formattedThinkingContent?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("span",je,null,512)),[[s,r.message.formattedThinkingContent]]):(0,n.createCommentVNode)("",!0),t[3]||(t[3]=(0,n.createElementVNode)("br",null,null,-1))])):(0,n.createCommentVNode)("",!0),r.message.summaryContent?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("span",Le,null,512)),[[s,r.message.summaryContent]]):(0,n.createCommentVNode)("",!0),!r.message.formattedMessageContent||r.message.summaryContent&&!r.message.showCompleteMessage?(0,n.createCommentVNode)("",!0):(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("span",{key:3,class:(0,n.normalizeClass)({"chat-msg-user-expanded":!!r.message.summaryContent&&r.message.showCompleteMessage})},null,2)),[[s,r.message.formattedMessageContent]])]),r.message.suggestionActions?.length?((0,n.openBlock)(),(0,n.createElementBlock)("div",Ue,[(0,n.createVNode)(be,{suggestions:r.message.suggestionActions,onSelect:t[0]||(t[0]=e=>i("send:message",e))},null,8,["suggestions"])])):(0,n.createCommentVNode)("",!0),r.message.confirmationAction?((0,n.openBlock)(),(0,n.createElementBlock)("div",Xe,[(0,n.createVNode)(pe,{value:r.message.confirmationAction,onConfirm:t[1]||(t[1]=e=>i("confirm:message",e))},null,8,["value"])])):(0,n.createCommentVNode)("",!0),r.message.role===(0,n.unref)(c.Xh).Assistant&&r.message.thinkingContent&&r.message.showThinking?((0,n.openBlock)(),(0,n.createBlock)(_.A,{key:3,class:"inline-button",small:"",ghost:"",onClick:v},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("a",null,(0,n.toDisplayString)((0,n.unref)(o)("ai.message.actions.hideThinking")),1)]),_:1})):(0,n.createCommentVNode)("",!0),r.message.summaryContent?((0,n.openBlock)(),(0,n.createBlock)(_.A,{key:4,class:"inline-button",small:"",ghost:"",onClick:g},{default:(0,n.withCtx)(()=>[(0,n.createElementVNode)("a",null,(0,n.toDisplayString)(r.message.showCompleteMessage?(0,n.unref)(o)("ai.message.actions.hideCompleteMessage"):(0,n.unref)(o)("ai.message.actions.showCompleteMessage")),1)]),_:1})):(0,n.createCommentVNode)("",!0)],2),r.message.source||r.message.role===(0,n.unref)(c.Xh).Assistant&&r.message.formattedMessageContent?((0,n.openBlock)(),(0,n.createElementBlock)("div",$e,[(0,n.createVNode)(se)])):(0,n.createCommentVNode)("",!0),r.message.linkActions?.length?((0,n.openBlock)(),(0,n.createElementBlock)("div",Oe,[(0,n.createVNode)(Z,{actions:r.message.linkActions},null,8,["actions"])])):(0,n.createCommentVNode)("",!0),r.message.timestamp?((0,n.openBlock)(),(0,n.createElementBlock)("div",Ge,(0,n.toDisplayString)(r.message.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),1)):(0,n.createCommentVNode)("",!0)])],2)}}});a(3084);const Fe=(0,D.A)(Re,[["__scopeId","data-v-1ef7fbe0"]]);var Ke=Fe,He=(0,n.defineComponent)({__name:"Messages",props:{messages:{type:Array,default:()=>[]},errors:{type:Array,default:()=>[]}},emits:["update:message","confirm:message","send:message"],setup(e,{emit:t}){const a=(0,s.Pj)(),o=a.getters["i18n/t"],r=e,i=t,l=(0,n.ref)(null),u=(0,n.ref)(!0),m=(0,n.computed)(()=>[...r.messages].filter(e=>e.messageContent||e.thinkingContent||e.confirmationAction||e.suggestionActions?.length).map(e=>({...e,formattedMessageContent:e.role===c.Xh.Assistant||e.summaryContent?(0,d.gg)(e.messageContent||""):e.messageContent,formattedThinkingContent:e.role===c.Xh.Assistant?(0,d.gg)(e.thinkingContent||""):""})).sort((e,t)=>(Number(e.timestamp)||0)-(Number(t.timestamp)||0)||`${e.id}`.localeCompare(`${t.id}`))),p=(0,n.computed)(()=>r.errors.map(e=>({role:c.Xh.System,formattedMessageContent:o(e.key),timestamp:new Date,completed:!0,isError:!0,actions:e.action?[e.action]:[]}))),g=(0,n.computed)(()=>r.errors.length>0);function v(){const e=l.value;e&&(u.value=e.scrollTop+e.clientHeight>=e.scrollHeight-2)}(0,n.watch)(()=>r.messages,()=>{(0,n.nextTick)(()=>{l.value&&u.value&&(l.value.scrollTop=l.value.scrollHeight)})},{immediate:!0,deep:!0});const f=(0,n.watch)(()=>r.errors,(e,t)=>{(0,n.nextTick)(()=>{l.value&&(e||[]).length>(t||[]).length&&(l.value.scrollTop=l.value.scrollHeight,f())})},{immediate:!0,deep:!0});return(0,n.onMounted)(()=>{l.value&&l.value.addEventListener("scroll",v)}),(0,n.onBeforeUnmount)(()=>{l.value&&l.value.removeEventListener("scroll",v)}),(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{ref_key:"messagesView",ref:l,class:"chat-messages"},[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(m.value,(e,a)=>((0,n.openBlock)(),(0,n.createBlock)(Ke,{key:a,message:e,disabled:g.value,"onUpdate:message":t=>i("update:message",e),"onConfirm:message":t[0]||(t[0]=e=>i("confirm:message",e)),"onSend:message":t[1]||(t[1]=e=>i("send:message",e)),"onEnable:autoscroll":t[2]||(t[2]=e=>u.value=e)},null,8,["message","disabled","onUpdate:message"]))),128)),((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(p.value,(e,t)=>((0,n.openBlock)(),(0,n.createBlock)(Ke,{key:t,message:e},null,8,["message"]))),128))],512))}});a(1678);const Ye=(0,D.A)(He,[["__scopeId","data-v-270e9337"]]);var We=Ye,qe=a(7332);const Je={key:0,class:"context-select"},Qe={key:0,class:"icon icon-pin-outlined"},Ze={class:"tags"},et={class:"tag-content"},tt=["onClick"],at={key:0,class:"context-reset"},nt={key:1,class:"text-muted no-context"};var ot=(0,n.defineComponent)({__name:"SelectContext",props:{options:{type:Array,default(){return[]}},autoSelect:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1}},emits:["update"],setup(e,{emit:t}){function a(e){return`${e.tag}_${e.value}`}const o=(0,s.Pj)(),r=o.getters["i18n/t"],i=e,l=(0,n.ref)([]),c=(0,n.ref)(!1),d=t;function u(e){l.value.find(t=>a(t)===a(e))?p(e):m(e)}function m(e){l.value.find(t=>a(t)===a(e))||(l.value=[...l.value,e],d("update",l.value))}function p(e){l.value=l.value.filter(t=>a(t)!==a(e)),d("update",l.value)}function g(){l.value=i.options,d("update",l.value)}return(0,n.watch)(()=>i.autoSelect,e=>{l.value=e,d("update",l.value)},{immediate:!0}),(0,n.watch)(()=>i.options,e=>{l.value=l.value.filter(t=>e.find(e=>a(e)===a(t))),d("update",l.value)}),(t,o)=>{const s=(0,n.resolveDirective)("clean-tooltip");return i.options.length>0?((0,n.openBlock)(),(0,n.createElementBlock)("div",Je,[(0,n.createVNode)((0,n.unref)(qe.Jj),{class:"context-dropdown",placement:"top-end","onUpdate:open":o[0]||(o[0]=e=>c.value=e)},{dropdownCollection:(0,n.withCtx)(()=>[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(i.options,(e,t)=>(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createBlock)((0,n.unref)(qe.s$),{key:t,onClick:t=>u(e)},{before:(0,n.withCtx)(()=>[e.icon?((0,n.openBlock)(),(0,n.createElementBlock)("i",{key:0,class:(0,n.normalizeClass)(["icon",e.icon])},null,2)):(0,n.createCommentVNode)("",!0)]),default:(0,n.withCtx)(()=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.tag)+":"+(0,n.toDisplayString)(e.value)+" ",1),l.value.find(t=>a(t)===a(e))?((0,n.openBlock)(),(0,n.createElementBlock)("i",{key:0,class:(0,n.normalizeClass)({"icon icon-close":l.value.find(t=>a(t)===a(e))})},null,2)):(0,n.createCommentVNode)("",!0)]),_:2},1032,["onClick"])),[[s,e.description]])),128))]),default:(0,n.withCtx)(()=>[(0,n.createVNode)((0,n.unref)(qe.Nq),{ghost:"",small:"",disabled:i.disabled},{after:(0,n.withCtx)(()=>[(0,n.createElementVNode)("i",{class:(0,n.normalizeClass)({"icon icon-chevron-up text-label":c.value,"icon icon-chevron-down text-label":!c.value})},null,2)]),default:(0,n.withCtx)(()=>[i.disabled?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("i",Qe)),(0,n.createElementVNode)("span",{class:(0,n.normalizeClass)(["text-label mr-5",{"ml-5":i.disabled}])},(0,n.toDisplayString)((0,n.unref)(r)("ai.context.add")),3)]),_:1},8,["disabled"])]),_:1}),(0,n.createElementVNode)("div",Ze,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(l.value,(e,t)=>(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:t,class:"vs__selected tag"},[(0,n.createElementVNode)("div",et,[(0,n.createElementVNode)("i",{class:(0,n.normalizeClass)(e.icon)},null,2),(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(e.value),1)]),(0,n.createElementVNode)("button",{type:"button",class:"vs__deselect",onClick:t=>p(e)},null,8,tt)])),[[s,e.description]])),128))]),e.options.length!==l.value.length?((0,n.openBlock)(),(0,n.createElementBlock)("div",at,[(0,n.createVNode)(_.A,{small:"",tertiary:"",onClick:g},{default:(0,n.withCtx)(()=>[o[1]||(o[1]=(0,n.createElementVNode)("i",{class:"icon icon-refresh mr-5"},null,-1)),(0,n.createTextVNode)(" "+(0,n.toDisplayString)((0,n.unref)(r)("ai.context.reset")),1)]),_:1,__:[1]})])):(0,n.createCommentVNode)("",!0)])):((0,n.openBlock)(),(0,n.createElementBlock)("span",nt,(0,n.toDisplayString)((0,n.unref)(r)("ai.context.none")),1))}}});a(3026);const st=(0,D.A)(ot,[["__scopeId","data-v-15abc270"]]);var rt=st,it=(0,n.defineComponent)({__name:"Context",props:{value:{type:Array,default:()=>({})},disabled:{type:Boolean,default:!1}},emits:["select"],setup(e,{emit:t}){const a=e,o=t;return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{class:(0,n.normalizeClass)(["chat-context",{disabled:a.disabled}])},[(0,n.createVNode)(rt,{options:a.value,"auto-select":a.value,disabled:a.disabled,onUpdate:t[0]||(t[0]=e=>o("select",e))},null,8,["options","auto-select","disabled"])],2))}});a(6134);const lt=(0,D.A)(it,[["__scopeId","data-v-3b74eddd"]]);var ct=lt;function dt(){const e=(0,s.Pj)(),t=(0,n.ref)(""),a=(0,n.computed)(()=>e.getters["rancher-ai-ui/input/text"]||t.value);function o(a){e.commit("rancher-ai-ui/input/text",""),t.value=a?.target?.value}function r(e){return(e||"").split("\n").filter(e=>""!==e.trim()).join("\n").trim()}function i(){e.commit("rancher-ai-ui/input/text",""),t.value=""}return(0,n.onBeforeUnmount)(()=>{i()}),{inputText:a,updateInput:o,cleanInput:r,clearInput:i}}const ut=["value","placeholder","disabled"],mt={class:"chat-input-console"};var pt=(0,n.defineComponent)({__name:"Input",props:{disabled:{type:Boolean,default:!1}},emits:["input:content"],setup(e,{emit:t}){const a=(0,s.Pj)(),o=a.getters["i18n/t"],r=e,i=t,{inputText:l,updateInput:c,cleanInput:d,clearInput:u}=dt(),m=(0,n.ref)(null),p=(0,n.computed)(()=>r.disabled?"":l.value);function g(e){c(e),h()}function v(e){"Enter"!==e.key||e.shiftKey||f(e)}function f(e){e.preventDefault(),e.stopPropagation(),i("input:content",d(p.value)),u()}function h(e){const t=m.value;t&&(t.style.overflow=parseInt(t.style.height)>90?"auto":"hidden",t.style.height="auto",t.style.height=`${e||t.scrollHeight}px`)}return(0,n.onMounted)(()=>{(0,n.nextTick)(()=>{m.value?.focus()})}),(0,n.onUpdated)(()=>{(0,n.nextTick)(()=>{m.value?.focus()})}),(0,n.watch)(m,e=>{e&&(0,n.nextTick)(()=>e.focus())},{}),(0,n.watch)(()=>p.value,()=>{(0,n.nextTick)(()=>{h()})},{}),(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{class:(0,n.normalizeClass)(["chat-input-row",{disabled:r.disabled}])},[(0,n.createElementVNode)("textarea",{ref_key:"promptTextarea",ref:m,class:"chat-input",rows:"1",value:p.value,placeholder:r.disabled?"":(0,n.unref)(o)("ai.prompt.placeholder"),disabled:r.disabled,autocomplete:"off",onInput:g,onKeydown:v},null,40,ut),(0,n.createElementVNode)("div",mt,[(0,n.createVNode)(_.A,{small:"",disabled:!p.value||r.disabled,onClick:f,onKeydown:(0,n.withKeys)(f,["enter"])},{default:(0,n.withCtx)(()=>t[0]||(t[0]=[(0,n.createElementVNode)("i",{class:"icon icon-lg icon-send"},null,-1)])),_:1,__:[0]},8,["disabled"])])],2))}});a(9140);const gt=(0,D.A)(pt,[["__scopeId","data-v-10bd07e1"]]);var vt=gt,ft=a(5718);const ht={class:"chat-panel"};var bt=(0,n.defineComponent)({__name:"Chat",setup(e){const{agent:t,error:a}=E(),{messages:s,onopen:r,onmessage:c,sendMessage:d,updateMessage:u,confirmMessage:m,selectContext:p,resetChatError:v,error:f}=g(),{ws:h,connect:k,disconnect:x,error:y}=i({onopen:r,onmessage:c}),{context:w}=l(),{resize:C,close:_,restore:B}=b(),N=(0,n.computed)(()=>a.value?[a.value]:[y.value,f.value].filter(e=>e));function A(){v(),_()}function M(e){e.key===ft.s&&(e.stopPropagation(),e.preventDefault())}function V(){x(),B()}return(0,n.onMounted)(()=>{k(o.AGENT_NAMESPACE,o.AGENT_NAME,o.AGENT_API_PATH),window.addEventListener("beforeunload",V)}),(0,n.onBeforeUnmount)(()=>{V(),window.removeEventListener("beforeunload",V)}),(e,a)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{class:"chat-container",tabindex:"0",onKeydown:M},[(0,n.createElementVNode)("div",{class:"resize-bar",onMousedown:a[0]||(a[0]=(0,n.withModifiers)((...e)=>(0,n.unref)(C)&&(0,n.unref)(C)(...e),["prevent","stop"])),onTouchstart:a[1]||(a[1]=(0,n.withModifiers)((...e)=>(0,n.unref)(C)&&(0,n.unref)(C)(...e),["prevent","stop"]))},null,32),(0,n.createElementVNode)("div",ht,[(0,n.createVNode)(P,{agent:(0,n.unref)(t),onClose:A},null,8,["agent"]),(0,n.createVNode)(We,{messages:(0,n.unref)(s),errors:N.value,"onUpdate:message":(0,n.unref)(u),"onConfirm:message":a[2]||(a[2]=e=>(0,n.unref)(m)(e,(0,n.unref)(h))),"onSend:message":a[3]||(a[3]=e=>(0,n.unref)(d)(e,(0,n.unref)(h)))},null,8,["messages","errors","onUpdate:message"]),(0,n.createVNode)(ct,{value:(0,n.unref)(w),disabled:N.value.length>0,onSelect:(0,n.unref)(p)},null,8,["value","disabled","onSelect"]),(0,n.createVNode)(vt,{disabled:!(0,n.unref)(h)||3===(0,n.unref)(h).readyState||N.value.length>0,"onInput:content":a[4]||(a[4]=e=>(0,n.unref)(d)(e,(0,n.unref)(h)))},null,8,["disabled"])])],32))}});a(7400),a(6466);const kt=(0,D.A)(bt,[["__scopeId","data-v-4181ee82"]]);var xt=kt},7063:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),r=a.n(s),i=r()(o());i.push([e.id,".suggestions-header[data-v-50b2cb26]{margin-bottom:8px}",""]),t["default"]=i},7134:function(e,t,a){var n=a(94);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("f2e1c038",n,!0,{sourceMap:!1,shadowMode:!1})},7400:function(e,t,a){var n=a(1144);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("3f53261f",n,!0,{sourceMap:!1,shadowMode:!1})},7432:function(e,t,a){var n=a(4520);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("40c9af5a",n,!0,{sourceMap:!1,shadowMode:!1})},8162:function(e,t,a){"use strict";a.r(t);var n=a(6758),o=a.n(n),s=a(6173),r=a.n(s),i=r()(o());i.push([e.id,".confirmation-message[data-v-45ba26ae]{margin-bottom:12px}.confirmation-buttons[data-v-45ba26ae],.delete-confirmation[data-v-45ba26ae],.standard-confirmation[data-v-45ba26ae]{display:flex;justify-content:flex-end;gap:8px}",""]),t["default"]=i},9140:function(e,t,a){var n=a(116);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("439f770e",n,!0,{sourceMap:!1,shadowMode:!1})},9426:function(e,t,a){var n=a(6370);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=a(4825).A;o("8d38aa8a",n,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=rancher-ai-ui-0.1.1.umd.min.913.js.map